(this["webpackJsonpcalendar-course"]=this["webpackJsonpcalendar-course"]||[]).push([[0],{289:function(e,t,n){},290:function(e,t,n){"use strict";n.r(t);var r,a=n(0),c=n.n(a),s=n(28),u=n.n(s),o=n(34),i=n(101),j=n(27),l=n(293),b=n(83),O=n(294),d=n(68),h=n(295),f=n(297),p=n(55),m=n(53),v=n.n(m),x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Required field";return{required:!0,message:e}},E=function(e){return function(){return{validator:function(t,n){return n.isSameOrAfter(v()())?Promise.resolve():Promise.reject(new Error(e))}}}},S=n(82),g=n(25),y=n(36),T=n.n(y),I=n(66),_=n(165),w=n.n(_).a.create({baseURL:"./users.json"}),N=function(){return w.get("")};!function(e){e.SET_IS_AUTH="SET_AUTH",e.SET_ERROR="SET_ERROR",e.SET_USER="SET_USER",e.SET_IS_LOADING="SET_IS_LOADING"}(r||(r={}));var A,R=r.SET_IS_AUTH,U=r.SET_ERROR,k=r.SET_USER,C=r.SET_IS_LOADING,G={setUser:function(e){return{type:k,payload:e}},setIsAuth:function(e){return{type:R,payload:e}},setError:function(e){return{type:U,payload:e}},setIsLoading:function(e){return{type:C,payload:e}},login:function(e,t){return function(){var n=Object(I.a)(T.a.mark((function n(r){return T.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{r(G.setIsLoading(!0)),setTimeout(Object(I.a)(T.a.mark((function n(){var a,c;return T.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,N();case 2:a=n.sent,(c=a.data.find((function(n){return n.username===e&&n.password===t})))?(localStorage.setItem("auth","true"),localStorage.setItem("userName",c.username),r(G.setUser(c)),r(G.setIsAuth(!0))):r(G.setError("\u041d\u0435\u043a\u043e\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u043e\u0440\u043e\u043b\u044c")),r(G.setIsLoading(!1));case 6:case"end":return n.stop()}}),n)}))),1e3)}catch(a){r(G.setError("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043b\u043e\u0433\u0438\u043d\u0435"))}case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},logout:function(){return function(){var e=Object(I.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(G.setIsAuth(!0)),localStorage.removeItem("auth"),localStorage.removeItem("userName"),t(G.setUser({})),t(G.setIsAuth(!1));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}};!function(e){e.SET_GUESTS="SET_GUESTS",e.SET_EVENTS="SET_EVENTS"}(A||(A={}));var L,D=A.SET_EVENTS,V=A.SET_GUESTS,J={setGuests:function(e){return{type:V,payload:e}},setEvents:function(e){return{type:D,payload:e}},fetchGuests:function(){return function(){var e=Object(I.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N();case 3:n=e.sent,t(J.setGuests(n.data)),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},createEvent:function(e){return function(){var t=Object(I.a)(T.a.mark((function t(n){var r,a;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{r=localStorage.getItem("events")||"[]",(a=JSON.parse(r)).push(e),n(J.setEvents(a)),localStorage.setItem("events",JSON.stringify(a))}catch(c){}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},fetchEvent:function(e){return function(){var t=Object(I.a)(T.a.mark((function t(n){var r,a,c;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{r=localStorage.getItem("events")||"[]",a=JSON.parse(r),c=a.filter((function(t){return t.author===e||t.guest===e})),n(J.setEvents(c))}catch(s){}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},F=Object(g.a)(Object(g.a)({},G),J),H=function(){var e=Object(o.b)();return Object(S.b)(F,e)},P=n(7),z=function(){var e=Object(o.c)((function(e){return e.auth})),t=e.isLoading,n=e.error,r=H().login,c=Object(a.useState)("user"),s=Object(d.a)(c,2),u=s[0],i=s[1],j=Object(a.useState)("123"),l=Object(d.a)(j,2),b=l[0],O=l[1],m=Object(a.useCallback)((function(){return r(u,b)}),[r,u,b]);return Object(P.jsxs)(h.a,{onFinish:m,children:[Object(P.jsx)(h.a.Item,{label:"Username",name:"username",rules:[x("Enter your username!")],children:Object(P.jsx)(f.a,{value:u,onChange:function(e){return i(e.currentTarget.value)}})}),Object(P.jsx)(h.a.Item,{label:"Password",name:"password",rules:[x("Enter your password!")],children:Object(P.jsx)(f.a.Password,{value:b,onChange:function(e){return O(e.currentTarget.value)}})}),n&&Object(P.jsx)("div",{style:{color:"red"},children:n}),Object(P.jsx)(h.a.Item,{wrapperCol:{offset:8,span:16},children:Object(P.jsx)(p.a,{type:"primary",htmlType:"submit",loading:t,children:"Submit"})}),Object(P.jsx)("div",{children:"login: user, password: 123"})]})},M=c.a.memo((function(){return Object(P.jsx)(l.a,{children:Object(P.jsx)(b.a,{justify:"center",align:"middle",className:"h100",children:Object(P.jsx)(O.a,{children:Object(P.jsx)(z,{})})})})})),q=n(298),B=function(e){var t=e.getFullYear(),n=e.getMonth()<10?"0".concat(e.getMonth()+1):e.getMonth()+1,r=e.getDate()<10?"0".concat(e.getDate()+1):e.getDate()+1;return"".concat(t,".").concat(n,".").concat(r)},Y=function(e){var t=e.events;return Object(P.jsx)(q.a,{dateCellRender:function(e){var n=B(e.toDate()),r=t.filter((function(e){return e.date===n}));return Object(P.jsx)("div",{children:r.map((function(e,t){return Object(P.jsx)("div",{children:e.description},t)}))})}})},K=n(299),Q=n(296),W=n(141),X=function(e){var t=e.guests,n=e.submit,r=Object(a.useState)({author:"",date:"",description:"",guest:""}),c=Object(d.a)(r,2),s=c[0],u=c[1],i=Object(o.c)((function(e){return e.auth})).user;return Object(P.jsxs)(h.a,{onFinish:function(){return n(Object(g.a)(Object(g.a)({},s),{},{author:i.username}))},children:[Object(P.jsx)(h.a.Item,{label:"Name event",name:"description",rules:[x("Event description")],children:Object(P.jsx)(f.a,{value:s.description,onChange:function(e){return u(Object(g.a)(Object(g.a)({},s),{},{description:e.target.value}))}})}),Object(P.jsx)(h.a.Item,{label:"Event date",name:"date",rules:[x(),E("\u041d\u0435\u043b\u044c\u0437\u044f \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u043e\u0431\u044b\u0442\u0438\u0435 \u0432 \u043f\u0440\u043e\u0448\u043b\u043e\u043c")],children:Object(P.jsx)(Q.a,{onChange:function(e){return function(e){e&&u(Object(g.a)(Object(g.a)({},s),{},{date:B(e.toDate())}))}(e)}})}),Object(P.jsx)(h.a.Item,{children:Object(P.jsx)(W.a,{onChange:function(e){return u(Object(g.a)(Object(g.a)({},s),{},{guest:e}))},children:t.map((function(e){return Object(P.jsx)(W.a.Option,{value:e.username,children:e.username},e.username)}))})}),Object(P.jsx)(b.a,{justify:"center",children:Object(P.jsx)(h.a.Item,{wrapperCol:{offset:8,span:16},children:Object(P.jsx)(p.a,{type:"primary",htmlType:"submit",children:"Create"})})})]})},Z=c.a.memo((function(){var e=Object(a.useState)(!1),t=Object(d.a)(e,2),n=t[0],r=t[1],c=Object(o.c)((function(e){return e.auth})).user,s=Object(o.c)((function(e){return e.event})),u=s.guests,i=s.events,j=H(),O=j.fetchGuests,h=j.createEvent,f=j.fetchEvent;Object(a.useEffect)((function(){O(),f(c.username)}),[]);var m=Object(a.useCallback)((function(e){r(!1),h(e)}),[]);return Object(P.jsxs)(l.a,{style:{margin:"5px"},children:[Object(P.jsx)(Y,{events:i}),Object(P.jsx)(b.a,{justify:"center",children:Object(P.jsx)(p.a,{style:{backgroundColor:"azure"},onClick:function(){return r(!0)},children:"Add event"})}),Object(P.jsx)(K.a,{title:"Add event",visible:n,footer:null,onCancel:function(){return r(!1)},children:Object(P.jsx)(X,{guests:u,submit:m})})]})}));!function(e){e.LOGIN="/login",e.EVENT="/"}(L||(L={}));var $=[{path:L.LOGIN,exact:!0,component:M}],ee=[{path:L.EVENT,exact:!0,component:Z}],te=function(){return Object(o.c)((function(e){return e.auth})).isAuth?Object(P.jsxs)(j.d,{children:[ee.map((function(e){return Object(P.jsx)(j.b,{path:e.path,exact:e.exact,component:e.component},e.path)})),Object(P.jsx)(j.a,{to:L.EVENT})]}):Object(P.jsxs)(j.d,{children:[$.map((function(e){return Object(P.jsx)(j.b,{path:e.path,exact:e.exact,component:e.component},e.path)})),Object(P.jsx)(j.a,{to:L.LOGIN})]})},ne=n(57),re=n(300),ae=c.a.memo((function(){var e=Object(j.g)(),t=Object(o.c)((function(e){return e.auth})),n=t.isAuth,r=t.user,a=H().logout;return Object(P.jsx)(ne.c,{children:Object(P.jsx)(b.a,{justify:"end",children:n?Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("div",{style:{color:"white"},children:r.username}),Object(P.jsx)(re.a,{theme:"dark",mode:"horizontal",selectable:!1,children:Object(P.jsx)(re.a.Item,{onClick:a,children:"Logout"},1)})]}):Object(P.jsx)(re.a,{theme:"dark",mode:"horizontal",selectable:!1,children:Object(P.jsx)(re.a.Item,{onClick:function(){return e.push(L.LOGIN)},children:"LOGIN"},1)})})})})),ce=(n(289),function(){var e=H(),t=e.setUser,n=e.setIsAuth;return Object(a.useEffect)((function(){localStorage.getItem("auth")&&(t({username:localStorage.getItem("userName")}),n(!0))}),[]),Object(P.jsxs)(l.a,{children:[Object(P.jsx)(ae,{}),Object(P.jsx)(l.a.Content,{children:Object(P.jsx)(te,{})})]})}),se=n(170),ue={isAuth:!1,user:{},isLoading:!1,error:""},oe=r.SET_IS_AUTH,ie=r.SET_ERROR,je=r.SET_USER,le=r.SET_IS_LOADING,be={events:[],guests:[]},Oe=A.SET_EVENTS,de=A.SET_GUESTS,he=Object(S.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe:return Object(g.a)(Object(g.a)({},e),{},{isAuth:t.payload});case je:return Object(g.a)(Object(g.a)({},e),{},{user:t.payload});case ie:return Object(g.a)(Object(g.a)({},e),{},{error:t.payload});case le:return Object(g.a)(Object(g.a)({},e),{},{isLoading:t.payload});default:return e}},event:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case de:return Object(g.a)(Object(g.a)({},e),{},{guests:t.payload});case Oe:return Object(g.a)(Object(g.a)({},e),{},{events:t.payload});default:return e}}}),fe=Object(S.d)(he,Object(S.a)(se.a));u.a.render(Object(P.jsx)(o.a,{store:fe,children:Object(P.jsx)(i.a,{children:Object(P.jsx)(ce,{})})}),document.getElementById("root"))}},[[290,1,2]]]);
//# sourceMappingURL=main.78333470.chunk.js.map